# ParseMetadata

---

## Описание
Данный проект создан для обработки метаданных библиотеки Parametrica, которые прописываются в
файле config.py. Он обрабатывает полученные данные и записывает в txt файл данные в удобочитаемом формате.

---

## Запуск приложения

Для запуска приложения нужно создать виртуальное окружение: `python -m venv env`, 
активируем его: `source env/Script/activate`, далее устанавливаем необходимые зависимости:
`pip install -r requirements.txt`.

Запуск проекта осуществляется с корневой директории командой `python metadata_action.py`.

---

## Принцип взаимодействия

Находясь в файле с расширением .py импортирует класс MetadataAction. Создаем его экземпляр
и передаем параметры: сами данные и названия файла, в который нужно сохранить данные.

---

## Запуск тестов

Тестирование написано с помощью библиотеки `pytest`, для запуска тестов прописываем
команду: `pytest -svv tests/test_MetadataAction.py`.

### Пример кода

```python
from src.metadata_action import MetadataAction
from config import config

metadata = config.__metadata__()
filename = 'test'

meta_action = MetadataAction(metadata, 
                             filename=filename,
                             only_primitive=False,
                             label=True,
                             type=True,
                             default=True,
                             hint=True,
                             rule=True)
meta_action.run()
```

---

В данном примере будут обработаны данные которые находятся в переменной metadata,
а сохранены будут в файл test.txt. Если `ограничения` для поля нет,
то оно не будет записано в txt файл.

Класс MetadataAction принимает такие параметры как:
* `data` - данные которые нужно обработать
* `filename` - название файла в который нужно записать данные
* `only_primitive` - отвечает за добавление только примитивных полей. По умолчанию `False`
* `label` - добавляет описание поля. По умолчанию `True`
* `type` - добавляет тип поля. По умолчанию `True`
* `default` - добавляет значение по умолчанию. По умолчанию `True`
* `hint` - добавляет подсказку. По умолчанию `False`
* `rule` - добавляет ограничение. По умолчанию `False`

---

По итогу должен получиться примерно следующий .txt файл:
```text
Поле common
    Описание поля: Общие поля для примера
    Подсказка: Сюда вписывать примитивы
    Поле int_field
        Описание поля: Интовое поле
        Тип поля: целочисленное
        Значение по умолчанию: 220
        Подсказка: Записывается сюда какое-то значение целочисленное
    Поле flag
        Описание поля: Флаг значение
        Тип поля: логическое
        Подсказка: Тут понятно должно быть что оно в себе хранит
    Поле string
        Описание поля: Строчный тип типа
        Тип поля: строка
        Значение по умолчанию: STR
        Подсказка: Используется для хранения строки
    Поле enum_field
        Описание поля: Тут хранится enum
        Тип поля: MyEnum
        Значение по умолчанию: value2
    Поле list_field
        Описание поля: Списочек
        Тип поля: кортеж
        Значение по умолчанию: (1, 2, 3, 4)
    Поле empty_list
        Описание поля: Пустой списочек
        Тип поля: кортеж
    Поле tuple_field
        Описание поля: Кортеж
        Тип поля: кортеж
        Значение по умолчанию: (False, True, True)
```